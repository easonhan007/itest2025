---
weight: 0
title: Selenium踩坑指北
date: '2025-06-17T17:29:15+08:00'
lastmod: '2025-06-17T17:29:15+08:00'
draft: false
author: 乙醇
authorLink: https://github.com/easonhan007
images: []
resources:
- name: featured-image
  src: https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=300
tags: []
categories:
- 博客合集
lightgallery: true
toc:
  auto: false
---



最近在翻selenium的官方文档，秃然发现了一份官方的selenium踩坑指南，不敢独享，拿出来给大家分享一下。

众所周知，我们应该把合适的工具用在合适的场景，这跟杀鸡的时候不需要用到宰牛刀是一样的道理。

selenium比较好的使用场景是验收测试/回归测试/TDD/BDD，一些同学喜欢把selenium用到某些selenium难以承受的场景，这种方式官方是不推荐的。

下面这些是官方给出的各种神坑，有兴趣的同学可以亲自踩一下。

### 验证码

一般来说我们不需要用selenium去处理各种验证码，有兴趣的同学可以逆向思维，亲自试试。

那么遇到验证码怎么办？

* 测试环境就关掉验证码
* 留个后门，比如万能验证码

### 下载文件

尽管我们可以使用selenium去点击下载按钮，从而达到下载文件的目的，但是这样做其实并不好。首先处理起来可能比较麻烦，另外关于下载时间下载速度以及下载完整性的验证我们是不太好做的。

一般来说，建议用selenium拿到下载链接，然后使用libcurl之类的库去直接处理下载比较好。用python的同学可以用requests库去处理下载了。


### HTTP 请求的响应码

这一part官方苦口婆心的解释了很多，大意是selenium是站在用户角度去自动化测试，对于终端用户来说，他们并不直接关注请求的返回码，他们关注的是能不能看到404的错误页面之类的可以直接感受到信息。

下面是非官方的建议，嗯，也就是我的建议

* 如果你真的关注响应的状态码，那么别在ui自动化层去做，试着去在非ui层，比如接口层做
* 放弃在ui自动化用例中断言状态码的努力，有舍才有得嘛

### 第三方登陆

使用selenium去自动化第三方登陆原则上是不推荐的。因为

* 增加了用例的复杂度和运行时间，用例容易跑失败
* 第三方登录是不稳定的，这会让你的登录变得不稳定

在国外一般第三方登录的提供方会提供对应的API，我们可以把登录API集成到用例里，这些API相当稳定，比用selenium去自动化登录过程要好。

国内可以通过类似的思路去做，比如微信登录就有自己的API，这种实现比较硬核，并且跟ui自动化结合起来也有一定难度，有需求的同学可以尝试一下。

### 用例依赖

这个问题甚合我意，终于有官方文档背书了。

selenium team说了，用例直接不要有依赖，要可以用任意顺序运行，原因我之前的文章里有大量说明，大家可以去翻一下。

### 性能测试

简而言之，selenium不适合做性能测试，原因我就不详细说了，总之不合适的话咱就不要强求，有情人总会终成眷属。

如果需要做性能测试，可以看看jmeter，官方推荐，值得信赖。

### 链接爬虫

用selenium去遍历一些链接从而达到爬虫的效果官方是不推荐的，理由是慢，有很多更好的替代方案。

这里我持有保留意见，对于一些反爬虫很厉害的网站，用selenium做爬虫其实是不错的选择，具体原因就不说明了，大家尝试之后也许就会理解。

对于学习selenium的同学来说，用selenium做爬虫其实是非常好的练习方式，尽管爬内容的效率不高，但咱们的目的是多写代码，多练习selenium的api，所以其实我是推荐大家把selenium当练习性的爬虫来用的。


好了，上面这些官方坑是大家可能会经常遇到的，你在使用selenium还遇到过哪些坑呢？欢迎评论留言。




原始封面

![课程图片](https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=300)

